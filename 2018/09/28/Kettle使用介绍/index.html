<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  Kettle使用介绍 |   Lilac的个人主页 </title>

 
  
    <link rel="icon" href="/images/favicon.png">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header">
	
  <nav class="header-nav">        
   
    <span class="iconfont icon-menu mobile-toggle"></span>   	

    <div class="header-menu">          
              
            

              <a class="header-menu-link" id="header-menu-home" href="/">首页</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-categories" href="/categories">分类</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-archives" href="/archives">归档</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-tags" href="/tags">标签</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-about" href="/about">关于</a>     

            
            
            

              <a class="iconfont icon-menu-search header-menu-link" id="header-menu-search"></a>

            
                
    </div>  
    
  </nav>
</header>   

      <div class="container">       
          
          
            <section class="main">  
          

          <article class="post">
  
	<div class="post-header">

	<p class="post-title">	
		Kettle使用介绍
	</p>
			

	<div class="meta-info">	
	<span>
		Sep 28, 2018
	</span>

	
	
		<i class="iconfont icon-words"></i>
		<span>
			4968
		</span>
	
</div>

</div> 
	 

	  <div class="post-content slideDownMin">

		

			
					<p>介绍Kettle工具之前首先了解一下ETL技术：<br>ETL（Extract-Transform-Load），用来描述将数据从来源端经过抽取（extract）、转换（transform）、加载（load）至目的端的过程。</p>
<p>ETL是构建数据仓库的重要一环（不仅限于数据仓库），用户从数据源抽取出所需的数据，经过数据清洗和加工，最终按照预先定义好的模型，将数据加载到目的数据仓库中去，做各种商业智能分析或者用于主数据管理体系。 </p>
<p>数据抽取：将数据从各种原始的业务系统或者非结构化文档中读取出来。<br>数据转换：按照预先设计好的规则将抽取得数据进行转换、清洗、加工，统一抽取的数据格式。<br>数据装载：将转换完的数据按制定的规则增量或全部导入到目的数据仓库。 </p>
<ol>
<li><p>Kettle概念</p>
<p>Kettle是一款国外开源的ETL工具，纯java编写，可以在Window、Linux、Unix上运行，绿色无需安装，数据抽取高效稳定。</p>
<p>Kettle 中文名称叫水壶，该项目的主程序员MATT 希望把各种数据放到一个壶里，然后以一种指定的格式流出。</p>
<p>Kettle这个ETL工具集，它允许你管理来自不同数据库的数据，通过提供一个图形化的用户环境来描述你想做什么，而不是你想怎么做。</p>
<p>Kettle中有两种脚本文件，转换（transformation）和作业（job），转换完成针对数据的基础转换，作业则完成整个工作流的控制。</p>
</li>
<li><p>下载和部署</p>
<p>Kettle下载地址：<a href="http://kettle.pentaho.org/" target="_blank" rel="noopener">http://kettle.pentaho.org/</a> 。</p>
<p><img src="./images/kettle_download.png" alt=""></p>
<p>压缩包下载完成后，因Kettle是绿色软件，解压到任意本地路径即可。</p>
</li>
<li><p>Kettle环境配置（Java运行环境配置，此步骤略）</p>
</li>
<li><p>Kettle转换中常用组件</p>
<ul>
<li><p>表输入（Table Input）：常用来利用连接和SQL，从数据库中读取信息。自动生成基本的SQL语句。</p>
<p>| 选项                | 描述                                                       |<br>| ——————- | ———————————————————- |<br>| 步骤名称            | 步骤的名称，在单一的步骤中，名称必需唯一                   |<br>| 数据库连接          | 读取数据的数据库连接                                       |<br>| SQL                 | SQL 语句用来从数据库连接中读取数据                         |<br>| 允许延迟加载        | 无                                                         |<br>| 替换SQL语句里的变量 | 替换SQL语句中的变量名                                      |<br>| 从步骤插入数据      | 指定我们期待读取数据的步骤名称。这些信息能被插入到 SQL语句 |<br>| 记录数限制          | 设置从数据库中读取的行数，0 所有行                         |</p>
</li>
<li><p>获取系统信息（GetSystem Info）：从 Kettle环境中获取信息。</p>
<p>| 选项     | 描述                                     |<br>| ——– | —————————————- |<br>| 步骤名称 | 步骤的名称，在单一的步骤中，名称必需唯一 |<br>| 名称     | 参数名称                                 |<br>| 类型     | 获取日期、转换信息、命令行参数等。       |</p>
</li>
<li><p>表输出（Table Output）：可以存储信息到数据库表中。</p>
<p>| 选项                     | 描述                                                         |<br>| ———————— | ———————————————————— |<br>| 步骤名称                 | 步骤的名称，在单一的步骤中，名称必需唯一                     |<br>| 数据库连接               | 用来写数据的数据库连接                                       |<br>| 目标模式                 | 要写数据的表的 Schema的名称。允许表名中包含“.”对数据源来说是很重要的。 |<br>| 目标表                   | 要写数据的表名                                               |<br>| 提交记录数量             | 在数据表中用事务插入行。如果 N比 0大，每 N行提交一次连接。否则，不使用事务，速度会慢一些。 |<br>| 裁剪表                   | 在插入数据之前清除目标表数据                                 |<br>| 忽略插入错误             | 使 Kettle忽略比喻违反主键约束之类的插入错误，18个警告将被日志记录。在批量插入的时候这个功能不可用。 |<br>| 使用批量插入             | 如果你想批量插入的话，就使用这个选项。这个选项的速度最快，默认被选上。 |<br>| 表分区数据               | 使用这个选项可以在多个表之间拆分数据。例如用把数据放到表 ALES_200510, SALES_200511，SALES_200512，…中来代替直接插入数据到表 SALES 中。 |<br>| 表名定义在一个字段里     | 使用这些选项可以拆分数据到一个或者多个表里，目标表名可以用你指定的字段来定义。例如如果你想存储顾客性别数据，这些数据可能会存储到表 M和表 F里面（female女性和 male男性表）。这个选项可以阻止这些字段插入到对应的表里。 |<br>| 返回一个自动产生的关键字 | 往表中插入行时，是否产生一个关键字                           |<br>| 自动产生关键字的字段名称 | 指定包含关键字的输出字段的字段名称                           |<br>| SQL                      | 根据源表表结构生成自动创建输出表的 SQL脚本                   |</p>
</li>
<li><p>字段选择（Select values）：选择字段、重命名字段、指定字段的长度或者精度。</p>
<p>下面是三个不同标签的功能：</p>
<p>选择和修改：指定需要流到输出流中的字段的精确顺序和名称</p>
<p>删除：指定必须从输出流中删除的字段</p>
<p>元数据：修改元数据字段的名称、类型、长度和精度</p>
<p>| 选项     | 描述                                     |<br>| ——– | —————————————- |<br>| 步骤名称 | 步骤的名称，在单一的步骤中，名称必需唯一 |<br>| 改名     | 如果不想改名，就使用空白                 |<br>| 长度     | 输入数字指定长度（-1：代表没有长度指定） |<br>| 精度     | 输入数字指定精度（-1：代表没有精度指定） |</p>
</li>
<li><p>过滤记录（Fileter rows）：允许你根据条件和比较符来过滤记录。一旦这个步骤连接到先前的步骤中，你可以简单的单击“<field>”“=”和“<value>”，区域来构建条件。</value></field></p>
<p>| 选项                    | 描述                                     |<br>| :———————- | —————————————- |<br>| 步骤名称                | 步骤的名称，在单一的步骤中，名称必需唯一 |<br>| 发送“true”数据给步骤：  | 指定条件返回 true的数据将发送到此步骤。  |<br>| 发送“false”数据给步骤： | 指定条件返回 false的数据将发送到此步骤。 |</p>
</li>
<li><p>执行SQL语句（ExecuteSQL script）：可以执行 SQL脚本。</p>
<p>| 选项       | 描述                                     |<br>| ———- | —————————————- |<br>| 步骤名称   | 步骤的名称，在单一的步骤中，名称必需唯一 |<br>| 执行每一行 | 步骤的每一个输入行执行                   |<br>| 变量替换   | 可以在 SQL脚本中使用参数                 |</p>
</li>
<li><p>设置变量（Set Variable）：允许你在一个任务中或者虚拟机中设置变量。它仅仅可以用一行数据来设置变量值。</p>
<p>下面是可以用的范围设定：</p>
<p>Valid in the virtual machine: 整个虚拟机将知道那个变量，仅可以在单机模式下运行。</p>
<p>Valid in the parent job: 变量仅在父任务中合法的。</p>
<p>Valid in the grand-parent job: 变量仅在祖父任务中合法的。</p>
<p>Valid in the root job:  变量仅在根任务中合法的。</p>
</li>
<li><p>获取变量（Get Variable）：允许你获取一个变量，它可以返回行或者附加值到输入行。</p>
<p>备注：你需要指定完整的变量格式${variable}或者%%variable%%。</p>
</li>
</ul>
</li>
<li><p>Kettle作业中常用组件</p>
<ul>
<li><p>开始（Start）：Start 是任务执行的入口，首先必须是任务可以执行。只有无条件的任务条目可以从Start入口连接。注：大家在开始过程当中最好只把它当成一个入口组件，不要使用它来做定时任务计划之类的工作，如果做定时任务有产生JAVA JVM内存溢出，这是一个BUG，在Kettle官网也说明不提倡使用此组件来做定时任务。</p>
</li>
<li><p>裁剪表（Truncate tables）：用来清空指定表中所有数据组件，类似与Oracle中Truncate语法。</p>
<p>| 选项                     | 描述                                     |<br>| ———————— | —————————————- |<br>| Job entry name           | 步骤的名称，在单一的步骤中，名称必需唯一 |<br>| 数据库连接               | 读取数据的数据库连接                     |<br>| Previous results to args | 通过上一步骤参数传递到此步骤使用         |<br>| Tables name              | 填写需要清空的表名                       |<br>| Schema name              | 表名的模式名                             |</p>
</li>
<li><p>转换（Transformation）：此转换组件是用来执行已经定义好的转换。</p>
<p>| 选项                                 | 描述                                                 |<br>| ———————————— | —————————————————- |<br>| Job名称                              | 任务条目的名称，在单个任务中，必须唯一               |<br>| 转换名称                             | 需要运行的转换的名称                                 |<br>| 资源库路径                           | 指定资源库目录中的文件名                             |<br>| 转换文件名                           | 如果你不是使用资源库工作，就指定转换运行的 XML文件名 |<br>| 指定文件日志                         | 检查是否为转换指定一个单独的日志文件                 |<br>| Apped logfile                        | 是否以追加的方式写入日志文件                         |<br>| 日志文件名                           | 日志文件的目录和名称                                 |<br>| 日志文件后缀名                       | 文件名扩展（例如：log或者 txt）                      |<br>| 日志文件包含日期                     | 文件名中添加系统日期                                 |<br>| 日志文件包含时间                     | 文件名中添加系统时间                                 |<br>| 日志级别                             | 日志级别                                             |<br>| 复制以前结果到参数                   | 复制以前结果到参数                                   |<br>| Copy previous  results to parameters | 上一次的转换结果复制到参数中                         |<br>| 执行每一行输入行                     | 支持循环，根据参数结果集执行每一行参数               |<br>| 在执行之前清除结果行列表             | 在转换运行之前，检查确保列表或结果行已经被清除       |<br>| 在执行之前清除结果文件列表           | 在转换运行之前，检查确保列表或结果文件已经被清除     |<br>| 在集群模式下运行这个转换             | 是否使用集群模式运行转换                             |<br>| Remote save  server                  | 执行集群节点服务器                                   |</p>
</li>
<li><p>执行SQL脚本（Execute SQL scripts）：使用 SQL任务条目执行 SQL 脚本，多行脚本之前用“;”隔开。</p>
<p>| 选项           | 描述                                   |<br>| ————– | ————————————– |<br>| 作业项名称     | 任务条目的名称，在单个任务中，必须唯一 |<br>| 数据库连接     | 数据库连接名称                         |<br>| 从文件中得到的 | 是否指定以文件形式执行SQL              |<br>| SQL文件名      | 指定SQL文件完整路径                    |<br>| 使用变量替换   | 如果SQL脚本中有使用到变量需要勾选      |<br>| SQL脚本        | 要执行的 SQL 脚本                      |</p>
</li>
<li><p>作业（Job）：此作业组件是用来执行已经定义好的作业，切勿设计死循环。</p>
<p>| 选项                                 | 描述                                                 |<br>| ———————————— | —————————————————- |<br>| 作业项名称                           | 作业名称，在单个任务中，必须唯一                     |<br>| 作业名称                             | 需要运行的作业的名称                                 |<br>| 资源库路径                           | 指定资源库目录中的文件名                             |<br>| 作业文件名                           | 如果你不是使用资源库工作，就指定作业运行的 XML文件名 |<br>| 指定文件日志                         | 检查是否为转换指定一个单独的日志文件                 |<br>| Apped logfile                        | 是否以追加的方式写入日志文件                         |<br>| 日志文件名                           | 日志文件的目录和名称                                 |<br>| 日志文件后缀名                       | 文件名扩展（例如：log或者 txt）                      |<br>| 日志文件包含日期                     | 文件名中添加系统日期                                 |<br>| 日志文件包含时间                     | 文件名中添加系统时间                                 |<br>| 日志级别                             | 日志级别                                             |<br>| 将上一结果作为参数                   | 上一次结果作为参数使用                               |<br>| Copy previous  results to parameters | 上一次的转换结果复制到参数中                         |<br>| 执行每一行输入行                     | 支持循环，根据参数结果集执行每一行参数               |<br>| Remote save  server                  | 执行集群节点服务器                                   |</p>
</li>
<li><p>成功（Success）：此组件用来标识当前作业执行状态，在一个作业中可以有0个或者多个“Success”组件。</p>
</li>
<li><p>邮件（Mail）：可以使用 Mail任务条目来发送 e-Mail。</p>
<p>| 选项               | 描述                                 |<br>| :—————– | ———————————— |<br>| 地址标签           |                                      |<br>| 邮件作业名称       | 邮件作业名称，在单个任务中，必须唯一 |<br>| 目的地址           | 填写需要发送指定的邮箱地址           |<br>| 抄送               | 需要抄送人邮箱地址                   |<br>| 暗送               | 需要暗送人邮箱地址                   |<br>| 回复名称           | 邮件回复名称                         |<br>| 回复地址           | 邮件回复地址                         |<br>| Reply to           | 回复                                 |<br>| 联系人             | 在发送邮件内容中显示联系人           |<br>| 联系电话           | 在发送邮件内容中显示联系人电话       |<br>| 服务器标签         |                                      |<br>| SMTP服务器         | SMTP服务器，如163（smtp.163.com）    |<br>| 端口               | 端口，则是SMTP服务器，如163（25）    |<br>| 用户验证           | 是否需要用户验证                     |<br>| 用户名             | RotKang                              |<br>| 密码               | RotKang                              |<br>| 使用安全证         | 是否需要安全验证                     |<br>| 安全连接类型       | 默认为SSL                            |<br>| 邮件消息标签       |                                      |<br>| 信息里带日期       | 在邮箱内容中显示服务器日期           |<br>| 只发邮件注释       | 在发送邮件内容里只显示注释里的内容   |<br>| 使用HTML邮件格     | 使用HTML邮件格，目前测试不准确       |<br>| 编码               | 字符集编码                           |<br>| 管理优先级         | 默认                                 |<br>| 优先级             | 默认                                 |<br>| 重要               | 默认                                 |<br>| 主题               | 邮件主题名称                         |<br>| 注释               | 邮件内容说明                         |<br>| 附件标签           |                                      |<br>| 带附件             | 目前测试有问题，勾选无               |<br>| 文件类型           | 目前测试有问题                       |<br>| 压缩成文件统一格式 | 目前测试有问题                       |<br>| 压缩文件名称       | 目前测试有问题                       |</p>
</li>
</ul>
</li>
</ol>
  	
					
	  </div>     
	  

	
<div class="post-meta">
      
        <i class="iconfont icon-category"></i>       
        <a class="category-link" href="/categories/kettle/">kettle</a> 	
     
      	

      
        <i class="iconfont icon-tag"></i>     
          <a class="tag-link" href="/tags/ETL利器/">ETL利器</a> <a class="tag-link" href="/tags/JAVA编写/">JAVA编写</a> <a class="tag-link" href="/tags/跨平台/">跨平台</a>    
      	
</div>





<div class="post-footer">
  <div class="pf-left">
      <img class="pf-avatar" src="/images/header.jpg">
      <p class="pf-des">Hi,I am Lilac.</p>
  </div>

  <div class="pf-right">           
      <div class="pf-links">
        




<span class="donate-btn">
	<span class="iconfont icon-donate"></span>
</span>


<div id="donate-box" class="sildeUpMin">

	<span class="donate-cancel iconfont icon-cancel"></span>

	<div class="donate-img-box">
		<img id="donate-qr-wechat" class="noLazyLoad donate-img" src="/images/donate1.png" alt="No Donate Image!">	
		<img id="donate-qr-alipay" class="noLazyLoad donate-img" src="/images/donate2.jpg" alt="No Donate Image!">	
	</div>

	<span class="donate-word">世界很美，美在有你...</span>

	<div class="donate-list">
		<span class="iconfont icon-donate-wechat"></span>
		<span class="iconfont icon-donate-alipay"></span>
	</div>

</div>

 
        
	
<script id="-mob-share" src="http://f1.webshare.mob.com/code/mob-share.js?appkey=21d601593a1de"></script>
	
	<span class="share-btn">
	<span class="iconfont icon-share"></span>
	</span>


	<div class="-mob-share sildeUpMin">
		   			             
            <a class="iconfont  icon-share-qq -mob-share-qq"></a>		
     	   			             
            <a class="iconfont  icon-share-weixin -mob-share-weixin"></a>		
     	   			             
            <a class="iconfont  icon-share-weibo -mob-share-weibo"></a>		
     	   			             
            <a class="iconfont  icon-share-douban -mob-share-douban"></a>		
     	   			             
            <a class="iconfont  icon-share-facebook -mob-share-facebook"></a>		
     	   			             
            <a class="iconfont  icon-share-twitter -mob-share-twitter"></a>		
     	   			             
            <a class="iconfont  icon-share-google -mob-share-google"></a>		
     	   
	</div>	

      </div>  
    <nav class="pf-paginator">
      
         
          <a href="/2018/11/13/Linux常用命令/" data-hover="Linux常用命令">上一篇</a>      
            
        
      
        
        <a href="/2018/09/05/创建线程池的四种方式/" data-hover="创建线程池的四种方式"> 下一篇</a>
            
  </nav>   
  </div>
</div> 
	


    <div id="comment">   
    </div>

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>

    <script>
        new Valine({
			el: '#comment',
			notify: false, 
			verify: false, 
			app_id: 'KdBEOrmsVTUkBB43Ijx5j25d-gzGzoHsz',
			app_key: 'jsKmKvo9W9vxprFRyfInIxRt',  
			path: window.location.pathname, 
			avatar: 'mm' ,
			guest_info: ['nick','mail'],
			placeholder: 'leave your footprints'
        });
    </script>
	
</article>

          </section> 
      </div>            
    
    <a id="backTop">
      <span>
        <i class="iconfont icon-backtotop"></i>
      </span>
    </a> 

  
    
    <div class="search-container sildeUpMin">
        <div class="search-header">
            <input type="text" placeholder="输入你想搜索的" id="search-input" class="search-input">  
            <span class="search-cancel iconfont icon-cancel"></span>
        </div>
        <div id="search-result" class="search-result"></div>
    </div>
 
     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon" src="/images/favicon.png">   
      

         
            

            <a class="mobile-menu-link" href="/">首页
            </a>
            
         
            

            <a class="mobile-menu-link" href="/categories">分类
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">归档
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">标签
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">关于
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">搜索 </a>                 
            
         
      
</div>        
    


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?12f30a1c133ad3b622556efba282a5e6"; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>





     
    




<footer id="footer">	    

		
		<div class="footer-copyright">
		&copy;
				
		2018-
		
		2019		
	
		Lilac
		<br>

		Theme By
		<a href="https://github.com/Lemonreds/hexo-theme-Nayo" target="_blank">Nayo</a>	
		</div>			
	 
</footer>   

  

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>